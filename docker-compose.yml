version: '3.8'

services:
  evolution-api:
    image: atendai/evolution-api:latest
    container_name: evolution-api
    ports:
      - "8080:8080"
    environment:
      # URL pública da API
      SERVER_URL: http://localhost:8080
      
      # Chave de autenticação (IMPORTANTE: Mesma do .env.local)
      AUTHENTICATION_API_KEY: minha-chave-secreta-123
      
      # Configurações opcionais
      LOG_LEVEL: info
      LOG_COLOR: true
      
      # Webhook global (opcional - para debug)
      # WEBHOOK_GLOBAL_URL: http://host.docker.internal:3000/api/webhook/whatsapp
      
    volumes:
      - evolution_instances:/evolution/instances
      - evolution_store:/evolution/store
    
    restart: unless-stopped
    
    networks:
      - evolution-network

networks:
  evolution-network:
    driver: bridge

volumes:
  evolution_instances:
    name: evolution_instances
  evolution_store:
    name: evolution_store
